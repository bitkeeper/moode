/*1
 * moOde audio player (C) 2014 Tim Curtis
 * http://moodeaudio.org
 *
 * tsunamp player ui (C) 2013 Andrea Coiutti & Simone De Gregori
 * http://www.tsunamp.com
 *
 * This Program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 3, or (at your option)
 * any later version.
 *
 * This Program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 * 2020-MM-DD TC moOde 7.0.0
 *
 */
jQuery(document).ready(function(o){"use strict";GLOBAL.scriptSection="configs",o("#config-back").show(),o("#config-tabs").css("display","flex"),o("#menu-bottom").css("display","none"),o("#configure .row2-btns").hide(),o("meta[name=viewport]").attr("content","height="+o(window).height()+", width="+o(window).width()+", initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover"),o.post("command/moode.php?cmd=updcfgsystem",{library_pixelratio:window.devicePixelRatio}),o.getJSON("command/moode.php?cmd=read_cfgs_no_radio",function(e){SESSION.json=e.cfg_system,THEME.json=e.cfg_theme,NETWORK.json=e.cfg_network,UI.mobile=o(window).width()<480,setFontSize();themeOp;themeOp,themeColor=str2hex(THEME.json[SESSION.json.themename].tx_color),themeBack="rgba("+THEME.json[SESSION.json.themename].bg_color+","+SESSION.json.alphablend+")",themeMcolor=str2hex(THEME.json[SESSION.json.themename].tx_color),tempcolor=splitColor(o(".dropdown-menu").css("background-color")),themeOp=tempcolor[3],themeMback="rgba("+THEME.json[SESSION.json.themename].bg_color+","+themeOp+")",accentColor=themeToColors(SESSION.json.accent_color),document.body.style.setProperty("--themetext",themeMcolor);var t="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='30' height='30'><circle fill='%23"+accentColor.substr(1)+"' cx='14' cy='14.5' r='11.5'/></svg>";getCSSRule(".toggle .toggle-radio").style.backgroundImage='url("'+t+'")',document.body.style.setProperty("--config_modal_btn_bg","rgba(64,64,64,0.75)"),o(".modal-footer .btn").css("background-color","rgba(128,128,128,.35)"),o(".lib-config").length?o("#lib-config-btn").addClass("active"):o(".snd-config").length?o("#snd-config-btn").addClass("active"):o(".net-config").length?o("#net-config-btn").addClass("active"):o(".sys-config").length&&o("#sys-config-btn").addClass("active"),o.pnotify.defaults.history=!1,engineMpdLite(),engineCmdLite(),1==GLOBAL.thmUpdInitiated&&o(".busy-spinner").show()}),o("#config-back a").click(function(){"/index.php"==o(this).attr("href")&&o("#config-tabs").hide()}),o(".btn-submit").click(function(){o(".busy-spinner").show()}),o("#eqp-curve-name").change(function(){location.assign("http://"+location.host+"/eqp-config.php?curve="+o(this).val())}),o("#eqg-curve-name").change(function(){location.assign("http://"+location.host+"/eqg-config.php?curve="+o(this).val())}),o("#master-gain-up, #master-gain-dn").on("mousedown mouseup click",function(e){var t;"mousedown"==e.type?(t=o(this).attr("id"),eqGainUpdInterval=setInterval(function(){updEqpMasterGainSlider(t)},50)):"mouseup"==e.type?clearInterval(eqGainUpdInterval):"click"==e.type&&updEqpMasterGainSlider(o(this).attr("id"))}),o("#new-curvename").on("shown.bs.modal",function(){o("#new-curvename-input").focus()}),o("#eth0-method").length&&"static"==o("#eth0-method").val()&&o("#eth0-static").show(),o("#wlan0-method").length&&"static"==o("#wlan0-method").val()&&o("#wlan0-static").show(),o("#eth0-method").change(function(){"static"==o(this).val()?o("#eth0-static").show():o("#eth0-static").hide()}),o("#wlan0-method").change(function(){"static"==o(this).val()?""!=o("#wlan0ssid").val()&&"None (activates AP mode)"!=o("#wlan0ssid").val()?o("#wlan0-static").show():notify("needssid"):o("#wlan0-static").hide()}),o("#manual-ssid").on("shown.bs.modal",function(){o("#wlan0otherssid").focus()}),o("#wlan0ssid").change(function(){o("#wlan0ssid").val()==NETWORK.json.wlan0.wlanssid?o("#wlan0pwd").val(NETWORK.json.wlan0.wlan_psk):o("#wlan0pwd").val(""),"static"==o("#wlan0-method").val()&&(""==o(this).val()||"None (activates AP mode)"==o(this).val()?(o("#wlan0-static").hide(),notify("needdhcp")):o("#wlan0-static").show())}),o("#apdssid").on("input",function(){o("#apdssid").val()==NETWORK.json.apd0.wlanssid?o("#apdpwd").val(NETWORK.json.apd0.wlan_psk):o("#apdpwd").val("")}),o(".show-hide-password").click(function(e){var t=document.getElementById(o(this).data("id"));""!=o("#"+o(this).data("id")).val()&&("password"==t.type?t.type="text":t.type="password")}),o("#type").length&&o("#mounttype").val(o("#type").val()),o("#type").change(function(){o("#mounttype").val(o(this).val()),"cifs"==o(this).val()?(o("#userid-password").show(),o("#options").val("vers=1.0,sec=ntlm,ro,dir_mode=0777,file_mode=0777"),o("#info-mount-flags").html("vers=2.0 or 3.0 may be needed and/or sec=ntlm removed depending on what the NAS requires."),o("#scan-btn").show(),o("#edit-server").show(),o("#advanced-options").show()):"nfs"==o(this).val()?(o("#userid-password").hide(),o("#options").val("ro,nolock"),o("#info-mount-flags").html("vers=1.0 or higher may be needed depending on what the NAS requires."),o("#scan-btn").hide(),o("#edit-server").show(),o("#advanced-options").show()):"upnp"==o(this).val()&&(o("#userid-password").hide(),o("#scan-btn").show(),o("#edit-server").hide(),o("#advanced-options").hide())}),o("#manual-server").on("shown.bs.modal",function(){o("#manualserver").focus()}),o("#editserver").click(function(e){o("#manualserver").val(o("#address").val().trim())}),o("#view-thmcache-status").click(function(e){o.getJSON("command/moode.php?cmd=thmcachestatus",function(e){o("#thmcache-status").html(e)})}),o("#audio-output-format").change(function(){"disabled"!=o("#audio-output-format").val()?o("#selective_resample").show():o("#selective_resample").hide()}),o("#audio-output-format").length&&"disabled"!=o("#audio-output-format").val()&&o("#selective_resample").show(),o("#sox_quality").change(function(){"custom"==o("#sox_quality").val()?o("#sox_custom_recipe").show():o("#sox_custom_recipe").hide()}),o("#sox_quality").length&&"custom"==o("#sox_quality").val()&&o("#sox_custom_recipe").show(),o(".info-toggle").click(function(e){var t="#"+o(this).data("cmd");o(t).hasClass("hide")?o(t).removeClass("hide"):o(t).addClass("hide")})});
